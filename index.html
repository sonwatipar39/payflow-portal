<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Gateway</title>
</head>
<body>
    <div id="content" style="text-align: center; margin-top: 100px; font-family: Arial, sans-serif;">
        <h1>Payment Gateway</h1>
        <p>If you can see this page, basic HTML rendering is working.</p>
        
        <div id="status" style="margin: 20px; padding: 10px; background: #f0f0f0; border-radius: 5px;">
            Checking server connection...
        </div>
        
        <button id="testButton" style="padding: 10px 20px; background: #4a90e2; color: white; border: none; border-radius: 5px; cursor: pointer;">
            Test Server Connection
        </button>
    </div>

    <script>
        // Set up status display
        const statusElement = document.getElementById('status');
        
        // Function to update status
        function updateStatus(message, isError = false) {
            statusElement.textContent = message;
            statusElement.style.background = isError ? '#ffebee' : '#e8f5e9';
            statusElement.style.color = isError ? '#c62828' : '#2e7d32';
        }
        
        // Test button functionality
        document.getElementById('testButton').addEventListener('click', async function() {
            try {
                updateStatus('Testing connection to server...');
                
                // Try to fetch from the health endpoint
                const response = await fetch('/health');
                
                if (response.ok) {
                    const data = await response.json();
                    updateStatus(`Server is running! Server ID: ${data.serverId}, Time: ${data.serverTime}`);
                } else {
                    updateStatus(`Server responded with status: ${response.status}`, true);
                }
            } catch (error) {
                updateStatus(`Error connecting to server: ${error.message}`, true);
                console.error('Connection error:', error);
            }
        });
        
        // Initial page load check
        window.addEventListener('load', function() {
            console.log('Page loaded at:', new Date().toISOString());
            updateStatus('Page loaded successfully. Click the button to test the server connection.');
            
            // Display debugging information
            const debugInfo = document.createElement('div');
            debugInfo.style.margin = '20px';
            debugInfo.style.padding = '10px';
            debugInfo.style.border = '1px solid #ccc';
            debugInfo.style.borderRadius = '5px';
            debugInfo.style.fontSize = '12px';
            debugInfo.style.fontFamily = 'monospace';
            debugInfo.style.textAlign = 'left';
            
            debugInfo.innerHTML = `
                <h3>Debug Information</h3>
                <p>URL: ${window.location.href}</p>
                <p>User Agent: ${navigator.userAgent}</p>
                <p>Screen Size: ${window.innerWidth}x${window.innerHeight}</p>
                <p>Render Time: ${new Date().toISOString()}</p>
            `;
            
            document.getElementById('content').appendChild(debugInfo);
        });
    </script>
</body>
</html>
